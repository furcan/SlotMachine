(this["webpackJsonpslot-machine"]=this["webpackJsonpslot-machine"]||[]).push([[0],{22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(7),s=n(5),i=n(6),o=n(11),l=n(12),u=n(3),f=n(2),d=n.n(f),b=n(4),h=function(e){return new Promise((function(t){return setTimeout((function(){t()}),e||1e3)}))},j=function(){var e=Object(b.a)(d.a.mark((function e(t,n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var c=t.scrollTop,a=n-c,s=Math.floor(r/100)<10?10:Math.floor(r/100),i=0;!function n(){var o,l,u,f=(o=i+=s,l=c,u=a,(o/=r/2)<1?u/2*o*o+l:-u/2*(--o*(o-2)-1)+l);if(t.scrollTop=f,i<r)var d=setTimeout((function(){n(),clearTimeout(d)}),s);else e()}()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(e,t){return Math.floor(Math.random()*(t+1))+e},p="SLOT_START",v="SLOT_START",O="SLOT_RESTART",x="SLOT_ISSPINNING",S="SLOT_SPINNINGHASENDED",y="SLOT_LUCKYLINES",T="SLOT_LUCKYNUMBERS",_="SLOT_ACHIEVEMENTS",N=function(e){return{type:x,actionIsSpinning:e}},g=function(e){return{type:S,actionHasEnded:e}},R=function(e){return{type:y,actionLuckyLines:e}},L=function(e){return{type:T,actionLuckyNumbers:e}},I=function(e){return{type:_,actionAchievements:e}},E=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(g(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(R(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(L(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(I(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return e.slotReducer},P={stateSlotIsWelcome:!1,stateSlotCanBePlayed:!0,stateSlotIsSpinning:!1,stateSlotSpinningHasEnded:!1,stateSlotData:Array(20).fill(["symbol1","symbol2","symbol3","symbol4","symbol5"]).flat(),stateSlotAchievements:{lineTopAchievements:"",lineCenterAchievements:"",lineBottomAchievements:"",reelLeftVisibleIndexes:{top:0,center:0,bottom:0},reelCenterVisibleIndexes:{top:0,center:0,bottom:0},reelRightVisibleIndexes:{top:0,center:0,bottom:0}},stateSlotLuckyLines:{left:1,center:1,right:1},stateSlotLuckyNumbers:{left:m(6,94),center:m(6,94),right:m(6,94)}},H=Object(i.combineReducers)({slotReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return P;case v:case O:return Object(u.a)(Object(u.a)({},P),{},{stateSlotIsWelcome:!1});case x:return Object(u.a)(Object(u.a)({},e),{},{stateSlotCanBePlayed:!1,stateSlotIsSpinning:!0===t.actionIsSpinning});case S:return Object(u.a)(Object(u.a)({},e),{},{stateSlotCanBePlayed:!0,stateSlotSpinningHasEnded:!0===t.actionHasEnded});case y:return Object(u.a)(Object(u.a)({},e),{},{stateSlotLuckyLines:t.actionLuckyLines||P.stateSlotLuckyLines});case T:return Object(u.a)(Object(u.a)({},e),{},{stateSlotLuckyNumbers:t.actionLuckyNumbers||P.stateSlotLuckyNumbers});case _:return Object(u.a)(Object(u.a)({},e),{},{stateSlotAchievements:t.actionAchievements||P.stateSlotAchievements});default:return e}}}),D=(n(22),n(0));var M=function(){return Object(D.jsx)("header",{className:"header",children:Object(D.jsx)("div",{className:"header__container",children:Object(D.jsx)("h1",{children:"HEADER"})})})};n(24);var V=function(){return Object(D.jsx)("footer",{className:"footer",children:Object(D.jsx)("div",{className:"footer__container",children:Object(D.jsx)("div",{className:"footer__copyright",children:Object(D.jsx)("p",{className:"footer__copyright__text",children:"copyright text"})})})})};n(25);var B=function(e){var t=e.children;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(M,{}),Object(D.jsx)("main",{className:"layout",children:Object(D.jsx)("div",{className:"layout__container",children:Object(D.jsx)("div",{className:"layout__content",children:t})})}),Object(D.jsx)(V,{})]})};var G,F=function(){var e=Object(s.b)();return Object(D.jsxs)("div",{children:[Object(D.jsx)("h1",{children:"Welcome... (TODO)"}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsx)("button",{type:"button",onClick:function(){e(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:O});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:Object(D.jsx)("span",{children:"START GAME (TODO)"})})]})};!function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT"}(G||(G={}));var W=new Map([[G.LEFT,"left"],[G.CENTER,"center"],[G.RIGHT,"right"]]);n(26);var U=function(e){var t,n=e.classNamePrefix,r=e.slotData,c=e.refReel,a=e.refsSymbol,s=e.achievedIndexes,i=e.position,o=e.hasEnded;return Object(D.jsx)("div",{className:"".concat(n,"__reel ").concat(n,"__reel--").concat((t=i,W.get(t)||"")),ref:c,children:null===r||void 0===r?void 0:r.map((function(e,t){var r=o&&s.top===t?"state--top":"",c=o&&s.center===t?"state--center":"",i=o&&s.bottom===t?"state--bottom":"";return Object(D.jsx)("div",{ref:function(e){return a.current[t]=e},"data-achievement":e,className:["".concat(n,"__reel__symbol"),r,c,i].join(" ").trim(),children:Object(D.jsx)("span",{children:"".concat(e," - ").concat(t+1)})},t)}))})};n(27);var J=function(e){var t=e.classNamePrefix,n=e.refReelLeft,r=e.refReelCenter,c=e.refReelRight,a=e.refsSymbolsLeft,i=e.refsSymbolsCenter,o=e.refsSymbolsRight,l=Object(s.b)(),u=Object(s.c)(A),f=u.stateSlotCanBePlayed,p=u.stateSlotLuckyLines,v=u.stateSlotLuckyNumbers,x=function(){var e=Object(b.a)(d.a.mark((function e(){var t,s,u,f,x,S,y,T,_,g,R,L,I,A,P,H,D,M,V,B,G,F,W,U,J,K;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:O});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===(t=n.current)||void 0===t||t.scrollTo({top:0}),null===(s=r.current)||void 0===s||s.scrollTo({top:0}),null===(u=c.current)||void 0===u||u.scrollTo({top:0}),f=v.left,x=v.center,S=v.right,y=a.current[f-1],T=i.current[x-1],_=o.current[S-1],g=n.current,R=r.current,L=c.current,!(y&&T&&_&&g&&R&&L)){e.next=36;break}return l(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(N(!0)),e.next=3,h(1e3);case 3:t(N(!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),l(w({left:1,center:1,right:1})),I={left:m(6,94),center:m(6,94),right:m(6,94)},l(k(I)),A=y.offsetTop-g.offsetTop-p.left*y.offsetHeight,P=T.offsetTop-R.offsetTop-p.center*T.offsetHeight,H=_.offsetTop-L.offsetTop-p.right*_.offsetHeight,e.next=24,Promise.all([j(g,A,1e3),j(R,P,1500),j(L,H,2e3)]);case 24:D=a.current[f-p.left-1],M=i.current[x-p.center-1],V=o.current[S-p.right-1],B=a.current[f-p.left],G=i.current[x-p.center],F=o.current[S-p.right],W=a.current[f-p.left+1],U=i.current[x-p.center+1],J=o.current[f-p.right+1],K={lineTopAchievements:(null===D||void 0===D?void 0:D.dataset.achievement)+" * "+(null===M||void 0===M?void 0:M.dataset.achievement)+" * "+(null===V||void 0===V?void 0:V.dataset.achievement),lineCenterAchievements:(null===B||void 0===B?void 0:B.dataset.achievement)+" * "+(null===G||void 0===G?void 0:G.dataset.achievement)+" * "+(null===F||void 0===F?void 0:F.dataset.achievement),lineBottomAchievements:(null===W||void 0===W?void 0:W.dataset.achievement)+" * "+(null===U||void 0===U?void 0:U.dataset.achievement)+" * "+(null===J||void 0===J?void 0:J.dataset.achievement),reelLeftVisibleIndexes:{top:f-p.left-1,center:f-p.left,bottom:f-p.left+1},reelCenterVisibleIndexes:{top:x-p.center-1,center:x-p.center,bottom:x-p.center+1},reelRightVisibleIndexes:{top:S-p.right-1,center:S-p.right,bottom:S-p.right+1}},l(C(K)),l(E(!0));case 36:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)("button",{type:"button",className:["".concat(t,"__button"),"".concat(t,"__button--spin"),"".concat(f?"":"".concat(t,"__button--passive"))].join(" ").trim(),onClick:f?x:void 0,children:Object(D.jsxs)("span",{children:["SPIN BUTTON (TODO) - (","".concat(v.left,", ").concat(v.center,", ").concat(v.right),")"]})})};n(28);var K=function(){var e=Object(s.c)(A),t=e.stateSlotIsSpinning,n=e.stateSlotSpinningHasEnded,c=e.stateSlotData,a=e.stateSlotAchievements,i=Object(r.useRef)(null),o=Object(r.useRef)(null),l=Object(r.useRef)(null),u=Object(r.useRef)([]),f=Object(r.useRef)([]),d=Object(r.useRef)([]);return Object(D.jsxs)("div",{className:"machine",children:[Object(D.jsxs)("div",{className:"machine__reels ".concat(t?"machine__reels--spinning":""),children:[Object(D.jsx)(U,{classNamePrefix:"machine__reels",slotData:c,refReel:i,refsSymbol:u,achievedIndexes:a.reelLeftVisibleIndexes,position:G.LEFT,hasEnded:n}),Object(D.jsx)(U,{classNamePrefix:"machine__reels",slotData:c,refReel:o,refsSymbol:f,achievedIndexes:a.reelCenterVisibleIndexes,position:G.CENTER,hasEnded:n}),Object(D.jsx)(U,{classNamePrefix:"machine__reels",slotData:c,refReel:l,refsSymbol:d,achievedIndexes:a.reelRightVisibleIndexes,position:G.RIGHT,hasEnded:n})]}),Object(D.jsx)("div",{className:"machine__buttons",children:Object(D.jsx)(J,{classNamePrefix:"machine__buttons",refReelLeft:i,refReelCenter:o,refReelRight:l,refsSymbolsLeft:u,refsSymbolsCenter:f,refsSymbolsRight:d})})]})};n(29);var Y=function(){return Object(D.jsx)("div",{className:"game",children:Object(D.jsx)(K,{})})};var q=function(){var e=Object(s.c)(A).stateSlotIsWelcome;return Object(D.jsxs)(B,{children:[e&&Object(D.jsx)(F,{}),!e&&Object(D.jsx)(Y,{})]})},z=(n(30),function(){var e=Object(i.createStore)(H,Object(l.composeWithDevTools)(Object(i.applyMiddleware)(o.a)));return Object(D.jsx)(s.a,{store:e,children:Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(q,{})})})}),Q=window.document.getElementById("SlotMachineApp");(null===Q||void 0===Q?void 0:Q.hasChildNodes())?Object(a.hydrate)(Object(D.jsx)(z,{}),Q):Object(a.render)(Object(D.jsx)(z,{}),Q)}},[[31,1,2]]]);
//# sourceMappingURL=main.66e14144.chunk.js.map