(this["webpackJsonpslot-machine"]=this["webpackJsonpslot-machine"]||[]).push([[0],{22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(7),s=n(5),i=n(6),o=n(11),u=n(12),l=n(3),f=n(2),d=n.n(f),b=n(4),h=function(e){return new Promise((function(t){return setTimeout((function(){t()}),e||1e3)}))},j=function(){var e=Object(b.a)(d.a.mark((function e(t,n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var c=t.scrollTop,a=n-c,s=0;!function n(){var i,o,u,l=(i=s+=10,o=c,u=a,(i/=r/2)<1?u/2*i*i+o:-u/2*(--i*(i-2)-1)+o);if(t.scrollTop=l,s<r)var f=setTimeout((function(){n(),clearTimeout(f)}),10);else e()}()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),p=function(e,t){return Math.floor(Math.random()*(t+1))+e},v="SLOT_START",m="SLOT_START",O="SLOT_RESTART",x="SLOT_ISSPINNING",S="SLOT_SPINNINGHASENDED",T="SLOT_LUCKYLINES",y="SLOT_LUCKYNUMBERS",N="SLOT_ACHIEVEMENTS",g=function(e){return{type:x,actionIsSpinning:e}},L=function(e){return{type:S,actionHasEnded:e}},E=function(e){return{type:T,actionLuckyLines:e}},I=function(e){return{type:y,actionLuckyNumbers:e}},_=function(e){return{type:N,actionAchievements:e}},R=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(L(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(E(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(I(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(_(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return e.slotReducer},H={stateSlotIsWelcome:!1,stateSlotIsSpinning:!1,stateSlotSpinningHasEnded:!1,stateSlotData:Array(20).fill(["symbol1","symbol2","symbol3","symbol4","symbol5"]).flat(),stateSlotAchievements:{lineTopAchievements:"",lineCenterAchievements:"",lineBottomAchievements:"",reelLeftVisibleIndexes:{top:0,center:0,bottom:0},reelCenterVisibleIndexes:{top:0,center:0,bottom:0},reelRightVisibleIndexes:{top:0,center:0,bottom:0}},stateSlotLuckyLines:{left:1,center:1,right:1},stateSlotLuckyNumbers:{left:p(6,94),center:p(6,94),right:p(6,94)}},D=Object(i.combineReducers)({slotReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return H;case m:case O:return Object(l.a)(Object(l.a)({},H),{},{stateSlotIsWelcome:!1});case x:return Object(l.a)(Object(l.a)({},e),{},{stateSlotIsSpinning:!0===t.actionIsSpinning});case S:return Object(l.a)(Object(l.a)({},e),{},{stateSlotSpinningHasEnded:!0===t.actionHasEnded});case T:return Object(l.a)(Object(l.a)({},e),{},{stateSlotLuckyLines:t.actionLuckyLines||H.stateSlotLuckyLines});case y:return Object(l.a)(Object(l.a)({},e),{},{stateSlotLuckyNumbers:t.actionLuckyNumbers||H.stateSlotLuckyNumbers});case N:return Object(l.a)(Object(l.a)({},e),{},{stateSlotAchievements:t.actionAchievements||H.stateSlotAchievements});default:return e}}}),V=(n(22),n(0));var M=function(){return Object(V.jsx)("header",{className:"header",children:Object(V.jsx)("div",{className:"header__container",children:Object(V.jsx)("h1",{children:"HEADER"})})})};n(24);var P=function(){return Object(V.jsx)("footer",{className:"footer",children:Object(V.jsx)("div",{className:"footer__container",children:Object(V.jsx)("div",{className:"footer__copyright",children:Object(V.jsx)("p",{className:"footer__copyright__text",children:"copyright text"})})})})};n(25);var G=function(e){var t=e.children;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(M,{}),Object(V.jsx)("main",{className:"layout",children:Object(V.jsx)("div",{className:"layout__container",children:Object(V.jsx)("div",{className:"layout__content",children:t})})}),Object(V.jsx)(P,{})]})};var F,B=function(){var e=Object(s.b)();return Object(V.jsxs)("div",{children:[Object(V.jsx)("h1",{children:"Welcome... (TODO)"}),Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),Object(V.jsx)("button",{type:"button",onClick:function(){e(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:O});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:Object(V.jsx)("span",{children:"START GAME (TODO)"})})]})};!function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT"}(F||(F={}));var W=new Map([[F.LEFT,"left"],[F.CENTER,"center"],[F.RIGHT,"right"]]);var U=function(e){var t,n=e.classNamePrefix,r=e.slotData,c=e.refReel,a=e.refsSymbol,s=e.achievedIndexes,i=e.position,o=e.hasEnded;return Object(V.jsx)("div",{className:"".concat(n,"__reel ").concat(n,"__reel--").concat((t=i,W.get(t)||"")),ref:c,children:null===r||void 0===r?void 0:r.map((function(e,t){var r=o&&s.top===t?"state--top":"",c=o&&s.center===t?"state--center":"",i=o&&s.bottom===t?"state--bottom":"";return Object(V.jsx)("div",{ref:function(e){return a.current[t]=e},"data-achievement":e,className:["".concat(n,"__reel__symbol"),r,c,i].join(" ").trim(),children:Object(V.jsx)("span",{children:"".concat(e," - ").concat(t+1)})},t)}))})};n(26);var J=function(){var e=Object(s.b)(),t=Object(s.c)(C),n=t.stateSlotIsSpinning,c=t.stateSlotSpinningHasEnded,a=t.stateSlotData,i=t.stateSlotLuckyLines,o=t.stateSlotLuckyNumbers,u=t.stateSlotAchievements,l=Object(r.useRef)(null),f=Object(r.useRef)(null),v=Object(r.useRef)(null),m=Object(r.useRef)([]),x=Object(r.useRef)([]),S=Object(r.useRef)([]),T=function(){var t=Object(b.a)(d.a.mark((function t(n,r,c){var a,s,o,u,T,y,N,L,E,I,_,C,H,D,V,M,P,G,F,B,W,U,J;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:O});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===(a=l.current)||void 0===a||a.scrollTo({top:0}),null===(s=f.current)||void 0===s||s.scrollTo({top:0}),null===(o=v.current)||void 0===o||o.scrollTo({top:0}),u=m.current[n-1],T=x.current[r-1],y=S.current[c-1],N=l.current,L=f.current,E=v.current,!(u&&T&&y&&N&&L&&E)){t.next=33;break}return e(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g(!0)),e.next=3,h(1e3);case 3:t(g(!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(w({left:1,center:1,right:1})),I={left:p(6,94),center:p(6,94),right:p(6,94)},e(k(I)),_=u.offsetTop-N.offsetTop-i.left*u.offsetHeight,C=T.offsetTop-L.offsetTop-i.center*T.offsetHeight,H=y.offsetTop-E.offsetTop-i.right*y.offsetHeight,t.next=21,Promise.all([j(N,_,1e3),j(L,C,1500),j(E,H,2e3)]);case 21:D=m.current[n-i.left-1],V=x.current[r-i.center-1],M=S.current[c-i.right-1],P=m.current[n-i.left],G=x.current[r-i.center],F=S.current[c-i.right],B=m.current[n-i.left+1],W=x.current[r-i.center+1],U=S.current[c-i.right+1],J={lineTopAchievements:(null===D||void 0===D?void 0:D.dataset.achievement)+" * "+(null===V||void 0===V?void 0:V.dataset.achievement)+" * "+(null===M||void 0===M?void 0:M.dataset.achievement),lineCenterAchievements:(null===P||void 0===P?void 0:P.dataset.achievement)+" * "+(null===G||void 0===G?void 0:G.dataset.achievement)+" * "+(null===F||void 0===F?void 0:F.dataset.achievement),lineBottomAchievements:(null===B||void 0===B?void 0:B.dataset.achievement)+" * "+(null===W||void 0===W?void 0:W.dataset.achievement)+" * "+(null===U||void 0===U?void 0:U.dataset.achievement),reelLeftVisibleIndexes:{top:n-i.left-1,center:n-i.left,bottom:n-i.left+1},reelCenterVisibleIndexes:{top:r-i.center-1,center:r-i.center,bottom:r-i.center+1},reelRightVisibleIndexes:{top:c-i.right-1,center:c-i.right,bottom:c-i.right+1}},e(A(J)),e(R(!0));case 33:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("button",{type:"button",className:"app__button",onClick:function(){return T(o.left,o.center,o.right)},children:Object(V.jsxs)("span",{children:["TEST BUTTON (","".concat(o.left,", ").concat(o.center,", ").concat(o.right),")"]})}),Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),Object(V.jsxs)("div",{className:"machine ".concat(n?"machine--spinning":""),children:[Object(V.jsx)(U,{classNamePrefix:"machine",slotData:a,refReel:l,refsSymbol:m,achievedIndexes:u.reelLeftVisibleIndexes,position:F.LEFT,hasEnded:c}),Object(V.jsx)(U,{classNamePrefix:"machine",slotData:a,refReel:f,refsSymbol:x,achievedIndexes:u.reelCenterVisibleIndexes,position:F.CENTER,hasEnded:c}),Object(V.jsx)(U,{classNamePrefix:"machine",slotData:a,refReel:v,refsSymbol:S,achievedIndexes:u.reelRightVisibleIndexes,position:F.RIGHT,hasEnded:c})]})]})};n(27);var K=function(){return Object(V.jsx)("div",{className:"game",children:Object(V.jsx)(J,{})})};var Y=function(){var e=Object(s.c)(C).stateSlotIsWelcome;return Object(V.jsxs)(G,{children:[e&&Object(V.jsx)(B,{}),!e&&Object(V.jsx)(K,{})]})},q=(n(28),function(){var e=Object(i.createStore)(D,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(o.a)));return Object(V.jsx)(s.a,{store:e,children:Object(V.jsx)(c.a.StrictMode,{children:Object(V.jsx)(Y,{})})})}),z=window.document.getElementById("SlotMachineApp");(null===z||void 0===z?void 0:z.hasChildNodes())?Object(a.hydrate)(Object(V.jsx)(q,{}),z):Object(a.render)(Object(V.jsx)(q,{}),z)}},[[29,1,2]]]);
//# sourceMappingURL=main.b2e906c7.chunk.js.map