(this["webpackJsonpslot-machine"]=this["webpackJsonpslot-machine"]||[]).push([[0],{22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(7),a=n(5),s=n(6),o=n(11),u=n(12),l=n(3),f=n(2),b=n.n(f),d=n(4),h=function(e){return new Promise((function(t){return setTimeout((function(){t()}),e||1e3)}))},j=function(){var e=Object(d.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var c=t.scrollTop,i=n-c,a=0;!function n(){var s,o,u,l=(s=a+=10,o=c,u=i,(s/=r/2)<1?u/2*s*s+o:-u/2*(--s*(s-2)-1)+o);if(t.scrollTop=l,a<r)var f=setTimeout((function(){n(),clearTimeout(f)}),10);else e()}()})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(e,t){return Math.floor(Math.random()*(t+1))+e},p="SLOT_START",v="SLOT_START",O="SLOT_RESTART",x="SLOT_ISSPINNING",S="SLOT_SPINNINGHASENDED",y="SLOT_LUCKYLINES",_="SLOT_LUCKYNUMBERS",g="SLOT_ACHIEVEMENTS",T=function(e){return{type:x,actionIsSpinning:e}},N=function(e){return{type:S,actionHasEnded:e}},L=function(e){return{type:y,actionLuckyLines:e}},I=function(e){return{type:_,actionLuckyNumbers:e}},k=function(e){return{type:g,actionAchievements:e}},w=function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(N(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(L(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(I(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(k(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},V=function(e){return e.slotReducer},C={stateSlotIsWelcome:!0,stateSlotIsSpinning:!1,stateSlotSpinningHasEnded:!1,stateSlotData:Array(20).fill(["symbol1","symbol2","symbol3","symbol4","symbol5"]).flat(),stateSlotAchievements:{lineTopAchievements:"",lineCenterAchievements:"",lineBottomAchievements:"",reelLeftVisibleIndexes:{top:0,center:0,bottom:0},reelCenterVisibleIndexes:{top:0,center:0,bottom:0},reelRightVisibleIndexes:{top:0,center:0,bottom:0}},stateSlotLuckyLines:{left:1,center:1,right:1},stateSlotLuckyNumbers:{left:m(6,94),center:m(6,94),right:m(6,94)}},H=Object(s.combineReducers)({slotReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return C;case v:case O:return Object(l.a)(Object(l.a)({},C),{},{stateSlotIsWelcome:!1});case x:return Object(l.a)(Object(l.a)({},e),{},{stateSlotIsSpinning:!0===t.actionIsSpinning});case S:return Object(l.a)(Object(l.a)({},e),{},{stateSlotSpinningHasEnded:!0===t.actionHasEnded});case y:return Object(l.a)(Object(l.a)({},e),{},{stateSlotLuckyLines:t.actionLuckyLines||C.stateSlotLuckyLines});case _:return Object(l.a)(Object(l.a)({},e),{},{stateSlotLuckyNumbers:t.actionLuckyNumbers||C.stateSlotLuckyNumbers});case g:return Object(l.a)(Object(l.a)({},e),{},{stateSlotAchievements:t.actionAchievements||C.stateSlotAchievements});default:return e}}}),D=(n(22),n(0));var M=function(){return Object(D.jsx)("header",{className:"header",children:Object(D.jsx)("div",{className:"header__container",children:Object(D.jsx)("h1",{children:"HEADER"})})})};n(24);var B=function(){return Object(D.jsx)("footer",{className:"footer",children:Object(D.jsx)("div",{className:"footer__container",children:Object(D.jsx)("div",{className:"footer__copyright",children:Object(D.jsx)("p",{className:"footer__copyright__text",children:"copyright text"})})})})};n(25);var P=function(e){var t=e.children;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(M,{}),Object(D.jsx)("main",{className:"layout",children:Object(D.jsx)("div",{className:"layout__container",children:Object(D.jsx)("div",{className:"layout__content",children:t})})}),Object(D.jsx)(B,{})]})};var W=function(){var e=Object(a.b)();return Object(D.jsxs)("div",{children:[Object(D.jsx)("h1",{children:"Welcome... (TODO)"}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsx)("button",{type:"button",onClick:function(){e(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:O});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:Object(D.jsx)("span",{children:"START GAME (TODO)"})})]})};n(26);var U=function(){var e=Object(a.b)(),t=Object(a.c)(V),n=t.stateSlotIsSpinning,c=t.stateSlotSpinningHasEnded,i=t.stateSlotData,s=t.stateSlotLuckyLines,o=t.stateSlotLuckyNumbers,u=t.stateSlotAchievements,l=Object(r.useRef)(null),f=Object(r.useRef)(null),p=Object(r.useRef)(null),v=Object(r.useRef)([]),x=Object(r.useRef)([]),S=Object(r.useRef)([]),y=function(){var t=Object(d.a)(b.a.mark((function t(n,r,c){var i,a,o,u,y,_,g,N,L,I,k,V,C,H,D,M,B,P,W,U,G,F,J;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:O});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),null===(i=l.current)||void 0===i||i.scrollTo({top:0}),null===(a=f.current)||void 0===a||a.scrollTo({top:0}),null===(o=p.current)||void 0===o||o.scrollTo({top:0}),u=v.current[n-1],y=x.current[r-1],_=S.current[c-1],g=l.current,N=f.current,L=p.current,!(u&&y&&_&&g&&N&&L)){t.next=33;break}return e(function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(T(!0)),e.next=3,h(1e3);case 3:t(T(!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(A({left:1,center:1,right:1})),I={left:m(6,94),center:m(6,94),right:m(6,94)},e(R(I)),k=u.offsetTop-g.offsetTop-s.left*u.offsetHeight,V=y.offsetTop-N.offsetTop-s.center*y.offsetHeight,C=_.offsetTop-L.offsetTop-s.right*_.offsetHeight,t.next=21,Promise.all([j(g,k,1e3),j(N,V,1500),j(L,C,2e3)]);case 21:H=v.current[n-s.left-1],D=x.current[r-s.center-1],M=S.current[c-s.right-1],B=v.current[n-s.left],P=x.current[r-s.center],W=S.current[c-s.right],U=v.current[n-s.left+1],G=x.current[r-s.center+1],F=S.current[c-s.right+1],J={lineTopAchievements:(null===H||void 0===H?void 0:H.dataset.achievement)+" * "+(null===D||void 0===D?void 0:D.dataset.achievement)+" * "+(null===M||void 0===M?void 0:M.dataset.achievement),lineCenterAchievements:(null===B||void 0===B?void 0:B.dataset.achievement)+" * "+(null===P||void 0===P?void 0:P.dataset.achievement)+" * "+(null===W||void 0===W?void 0:W.dataset.achievement),lineBottomAchievements:(null===U||void 0===U?void 0:U.dataset.achievement)+" * "+(null===G||void 0===G?void 0:G.dataset.achievement)+" * "+(null===F||void 0===F?void 0:F.dataset.achievement),reelLeftVisibleIndexes:{top:n-s.left-1,center:n-s.left,bottom:n-s.left+1},reelCenterVisibleIndexes:{top:r-s.center-1,center:r-s.center,bottom:r-s.center+1},reelRightVisibleIndexes:{top:c-s.right-1,center:c-s.right,bottom:c-s.right+1}},e(E(J)),e(w(!0));case 33:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("button",{type:"button",className:"app__button",onClick:function(){return y(o.left,o.center,o.right)},children:Object(D.jsxs)("span",{children:["TEST BUTTON (","".concat(o.left,", ").concat(o.center,", ").concat(o.right),")"]})}),Object(D.jsxs)("div",{className:"machine ".concat(n?"machine--spinning":""),children:[Object(D.jsx)("div",{className:"machine__reel machine__reel--left",ref:l,children:null===i||void 0===i?void 0:i.map((function(e,t){var n=c&&u.reelLeftVisibleIndexes.top===t?"state--top":"",r=c&&u.reelLeftVisibleIndexes.center===t?"state--center":"",i=c&&u.reelLeftVisibleIndexes.bottom===t?"state--bottom":"";return Object(D.jsx)("button",{ref:function(e){return v.current[t]=e},"data-achievement":e,className:["machine__reel__symbol",n,r,i].join(" ").trim(),children:Object(D.jsx)("span",{children:"".concat(e," - ").concat(t+1)})},t)}))}),Object(D.jsx)("div",{className:"machine__reel machine__reel--center",ref:f,children:null===i||void 0===i?void 0:i.map((function(e,t){var n=c&&u.reelCenterVisibleIndexes.top===t?"state--top":"",r=c&&u.reelCenterVisibleIndexes.center===t?"state--center":"",i=c&&u.reelCenterVisibleIndexes.bottom===t?"state--bottom":"";return Object(D.jsx)("button",{ref:function(e){return x.current[t]=e},"data-achievement":e,className:["machine__reel__symbol",n,r,i].join(" ").trim(),children:Object(D.jsx)("span",{children:"".concat(e," - ").concat(t+1)})},t)}))}),Object(D.jsx)("div",{className:"machine__reel machine__reel--right",ref:p,children:null===i||void 0===i?void 0:i.map((function(e,t){var n=c&&u.reelRightVisibleIndexes.top===t?"state--top":"",r=c&&u.reelRightVisibleIndexes.center===t?"state--center":"",i=c&&u.reelRightVisibleIndexes.bottom===t?"state--bottom":"";return Object(D.jsx)("button",{ref:function(e){return S.current[t]=e},"data-achievement":e,className:["machine__reel__symbol",n,r,i].join(" ").trim(),children:Object(D.jsx)("span",{children:"".concat(e," - ").concat(t+1)})},t)}))})]})]})};n(27);var G=function(){return Object(D.jsx)("div",{className:"game",children:Object(D.jsx)(U,{})})};var F=function(){var e=Object(a.c)(V).stateSlotIsWelcome;return Object(D.jsxs)(P,{children:[e&&Object(D.jsx)(W,{}),!e&&Object(D.jsx)(G,{})]})},J=(n(28),function(){var e=Object(s.createStore)(H,Object(u.composeWithDevTools)(Object(s.applyMiddleware)(o.a)));return Object(D.jsx)(a.a,{store:e,children:Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(F,{})})})}),K=window.document.getElementById("SlotMachineApp");(null===K||void 0===K?void 0:K.hasChildNodes())?Object(i.hydrate)(Object(D.jsx)(J,{}),K):Object(i.render)(Object(D.jsx)(J,{}),K)}},[[29,1,2]]]);
//# sourceMappingURL=main.4e15f094.chunk.js.map